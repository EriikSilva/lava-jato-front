<p-dialog
  [(visible)]="visualizarServicoDialog"
  (onHide)="closeDialog()"
  [header]="'Serviços'"
  [modal]="true"
  styleClass="p-fluid"
  [draggable]="false"
  [breakpoints]="{ '960px': '75vw' }"
  [style]="{ width: '75vw', height: '75vh' }"
  [draggable]="false"
>
<span style="display: flex; align-items: center; justify-content: center;margin-bottom: 1rem;">
  <h3>
    <i class="pi pi-car" style="margin-right: 6px;"></i>
    <b>Veículo: </b>{{veiculo | uppercase}}
    <i class="pi pi-directions" style="margin-right: 6px; margin-left:1rem;"></i>
    <b>Placa: </b>{{placa | uppercase}}
  </h3>
</span>
  
  <ng-template pTemplate="content">
    <p-table
      [value]="servicoCliente"
      [(selection)]="selectedItems"
      dataKey="cd_servico"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Selecione</th>
          <th>Serviço</th>
          <th pSortableColumn="valor">
            Valor <p-sortIcon field="valor"></p-sortIcon>
          </th> 
          <th pSortableColumn="status_servico">
            Status <p-sortIcon field="status_servico"></p-sortIcon>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-servico>
        <tr>
            <td>
                <p-tableCheckbox [value]="servico" dataKey="cd_servico" [disabled]="servico.status_servico === 'F'"></p-tableCheckbox>
            </td>
            <td>{{servico.servico}}</td>
            <td>
              <b>{{servico.valor | currency : "BRL" : "symbol"}}</b>
            </td>
            <td [ngStyle]="{'background-color': servico.status_servico === 'F' ? 'green' : 'red'}">
              <b><i>  {{servico.status_servico === 'F' ? "FINALIZADO" : "ABERTO"}}</i></b>
            </td>   
        </tr>
    </ng-template>
    </p-table>
    <p-progressSpinner
    class="progressSpinner"
    *ngIf="progressSpinner">
    </p-progressSpinner>
  </ng-template>
  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      label="Cancelar"
      icon="pi pi-times"
      class="p-button-text"
      (click)="closeDialog()"
    ></button>
  
      <button
      pButton
      [disabled]="selectedItems.length == 0"
      pRipple
      label="Executar"
      icon="pi pi-check"
      class="p-button-text"
      (click)="finalizarServico()"
      ></button>
  </ng-template>
</p-dialog>


<div class="card">
  <p-toast></p-toast>
</div>